<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Demonstration of Mixpeek Context Adapter for Prebid.js in action">
    <meta property="og:title" content="Mixpeek Prebid Demo - Mobile Technology">
    <meta property="og:description" content="Explore the latest in mobile phone technology and AI-powered features">
    <meta property="og:image" content="https://via.placeholder.com/1200x630?text=Mobile+Tech">
    <title>Mixpeek Prebid Demo - Mobile Technology Article</title>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        h1 {
            margin: 0 0 10px 0;
        }
        
        .meta {
            opacity: 0.9;
            font-size: 0.9em;
        }
        
        .container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }
        
        article {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .featured-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .ad-unit {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .ad-label {
            font-size: 0.7em;
            color: #999;
            text-transform: uppercase;
            margin-bottom: 10px;
        }
        
        .debug-panel {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            overflow-x: auto;
        }
        
        .debug-panel h3 {
            color: #4ec9b0;
            margin-top: 0;
        }
        
        .debug-panel pre {
            margin: 0;
            white-space: pre-wrap;
        }
        
        .status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .status.success {
            background: #4caf50;
            color: white;
        }
        
        .status.loading {
            background: #ff9800;
            color: white;
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üß† Mixpeek Context Adapter Demo</h1>
        <p class="meta">Real-time AI-powered contextual advertising with Prebid.js</p>
    </header>

    <div class="container">
        <article>
            <img class="featured-image" src="https://via.placeholder.com/800x400?text=Latest+Mobile+Phones" alt="Mobile Phones">
            
            <h2>The Evolution of Mobile Phones: AI-Powered Features Revolutionize Smartphones</h2>
            
            <p class="meta">Published on <time datetime="2025-10-08">October 8, 2025</time> by Tech Editor</p>
            
            <p>
                The smartphone industry continues to evolve at a breakneck pace, with artificial intelligence 
                becoming the cornerstone of modern mobile phone technology. Today's devices are more than just 
                communication tools‚Äîthey're powerful AI assistants that understand context, predict user needs, 
                and adapt to individual preferences.
            </p>
            
            <h3>AI-Driven Camera Technology</h3>
            <p>
                Modern mobile phones utilize advanced machine learning algorithms to capture stunning photographs. 
                From scene recognition to real-time image enhancement, AI has transformed smartphone photography 
                into a professional-grade experience. Night mode, portrait effects, and computational photography 
                are now standard features across most flagship devices.
            </p>
            
            <h3>Voice Assistants and Natural Language Processing</h3>
            <p>
                Voice assistants have become increasingly sophisticated, understanding natural language with 
                unprecedented accuracy. Whether you're setting reminders, composing messages, or searching for 
                information, AI-powered voice assistants make interactions seamless and intuitive.
            </p>
            
            <h3>Battery Optimization and Performance</h3>
            <p>
                Machine learning algorithms now monitor app usage patterns and system performance to optimize 
                battery life. By learning your habits, smartphones can intelligently allocate resources and 
                extend battery life by up to 30%.
            </p>
            
            <h3>The Future: On-Device AI Processing</h3>
            <p>
                The next frontier in mobile technology is on-device AI processing. With dedicated neural processing 
                units (NPUs), smartphones can perform complex AI tasks without cloud connectivity, ensuring faster 
                responses and enhanced privacy protection.
            </p>
        </article>

        <aside class="sidebar">
            <div class="ad-unit" id="div-banner-1">
                <div class="ad-label">Advertisement</div>
                <div id="banner-ad-content">
                    <!-- Prebid ad will load here -->
                    <div style="width: 300px; height: 250px; display: flex; align-items: center; justify-content: center; background: #f0f0f0; border: 2px dashed #ccc;">
                        Loading ad...
                    </div>
                </div>
            </div>
            
            <div class="ad-unit" id="div-banner-2">
                <div class="ad-label">Advertisement</div>
                <div id="banner-ad-content-2">
                    <div style="width: 300px; height: 250px; display: flex; align-items: center; justify-content: center; background: #f0f0f0; border: 2px dashed #ccc;">
                        Loading ad...
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <div class="debug-panel">
        <h3>üîç Mixpeek Context Debug Panel</h3>
        <div>
            Status: <span class="status loading" id="status">Initializing...</span>
        </div>
        <br>
        <pre id="debug-output">Waiting for context data...</pre>
    </div>

    <!-- Prebid.js -->
    <script async src="https://cdn.jsdelivr.net/npm/prebid.js@latest/dist/prebid.js"></script>
    
    <!-- Mixpeek Context Adapter -->
    <script src="../../dist/mixpeekContextAdapter.js"></script>
    
    <script>
        // Initialize Prebid
        var pbjs = pbjs || {};
        pbjs.que = pbjs.que || [];

        // Ad units configuration
        var adUnits = [
            {
                code: 'div-banner-1',
                mediaTypes: {
                    banner: {
                        sizes: [[300, 250], [300, 600]]
                    }
                },
                bids: [
                    {
                        bidder: 'rubicon',
                        params: {
                            accountId: '14062',
                            siteId: '70608',
                            zoneId: '335918'
                        }
                    }
                ]
            },
            {
                code: 'div-banner-2',
                mediaTypes: {
                    banner: {
                        sizes: [[300, 250]]
                    }
                },
                bids: [
                    {
                        bidder: 'appnexus',
                        params: {
                            placementId: '13144370'
                        }
                    }
                ]
            }
        ];

        // Configure Prebid with Mixpeek
        pbjs.que.push(function() {
            pbjs.setConfig({
                // Mixpeek Context Adapter Configuration
                mixpeek: {
                    apiKey: 'YOUR_MIXPEEK_API_KEY', // Replace with your API key
                    collectionId: 'YOUR_COLLECTION_ID', // Replace with your collection ID
                    namespace: 'demo', // Optional
                    mode: 'page', // 'page', 'video', or 'auto'
                    featureExtractors: ['taxonomy', 'brand-safety', 'keywords'],
                    timeout: 250,
                    cacheTTL: 300,
                    debug: true
                },
                
                // Other Prebid config
                bidderTimeout: 3000,
                enableSendAllBids: true
            });

            // Listen for Mixpeek events
            pbjs.onEvent('mixpeekContextReady', function(context) {
                console.log('Mixpeek context ready:', context);
                updateDebugPanel('success', context);
            });

            pbjs.onEvent('mixpeekContextError', function(error) {
                console.error('Mixpeek context error:', error);
                updateDebugPanel('error', error);
            });

            // Add ad units
            pbjs.addAdUnits(adUnits);

            // Request bids
            pbjs.requestBids({
                bidsBackHandler: function(bids) {
                    console.log('Bids received:', bids);
                    
                    // Render ads
                    Object.keys(bids).forEach(function(adUnitCode) {
                        pbjs.renderAd(document, bids[adUnitCode].adId);
                    });
                }
            });
        });

        // Debug panel updater
        function updateDebugPanel(status, data) {
            const statusEl = document.getElementById('status');
            const outputEl = document.getElementById('debug-output');
            
            if (status === 'success') {
                statusEl.textContent = 'Context Loaded';
                statusEl.className = 'status success';
                
                outputEl.textContent = JSON.stringify({
                    taxonomy: data.taxonomy,
                    brandSafety: data.brandSafety,
                    keywords: data.keywords,
                    sentiment: data.sentiment,
                    mode: data.mode,
                    documentId: data.documentId
                }, null, 2);
            } else {
                statusEl.textContent = 'Error';
                statusEl.className = 'status error';
                outputEl.textContent = JSON.stringify(data, null, 2);
            }
        }
    </script>
</body>
</html>

